version: '3'
services:
  web:
    build: .
  
    ports:
      - "8889:8889"

    # Link database container to app container 
    # for reachability.
    links:
      - "database:backenddb"
    depends_on:
      - database
  
  database:
    # image to fetch from docker hub
    image: postgres:latest

    # Environment variables for startup script
    # container will use these variables
    # to start the container with these defined variables. 
    env_file:
      - ./.env
    # Mount init.sql file to automatically run 
    # and create tables for us.
    # everything in docker-entrypoint-initdb.d folder
    # is executed as soon as container is up nd running.
    # volumes:
    #   - "/usercode/db/init.sql:/docker-entrypoint-initdb.d/init.sql"
    